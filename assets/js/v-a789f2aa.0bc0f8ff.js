"use strict";(self.webpackChunkqcloud_im_server_sdk_java=self.webpackChunkqcloud_im_server_sdk_java||[]).push([[259],{5575:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-a789f2aa",path:"/guide/operation_2.html",title:"运营管理",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"拉取运营数据",slug:"拉取运营数据",children:[]},{level:2,title:"下载最近消息记录",slug:"下载最近消息记录",children:[]},{level:2,title:"获取服务器 IP 地址",slug:"获取服务器-ip-地址",children:[]}],filePathRelative:"guide/operation_2.md",git:{updatedTime:1636356679e3,contributors:[{name:"Yang Libin",email:"szuyanglb@outlook.com",commits:3},{name:"怡蘅",email:"hongyihengg@gmail.com",commits:1}]}}},8131:(n,s,a)=>{a.r(s),a.d(s,{default:()=>p});const e=(0,a(6252).uE)('<h1 id="运营管理" tabindex="-1"><a class="header-anchor" href="#运营管理" aria-hidden="true">#</a> 运营管理</h1><h2 id="拉取运营数据" tabindex="-1"><a class="header-anchor" href="#拉取运营数据" aria-hidden="true">#</a> 拉取运营数据</h2><p>App 管理员可以通过该接口拉取最近 30 天的运营数据，可拉取的字段见下文可拉取的运营字段。</p><p>使用示例：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">GetAppInfoRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetAppInfoRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> requestFields <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;ChainIncrease&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ChainDecrease&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nrequest<span class="token punctuation">.</span><span class="token function">setRequestField</span><span class="token punctuation">(</span>requestFields<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token class-name">GetAppInfoResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span>operation<span class="token punctuation">.</span><span class="token function">getAppInfo</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="下载最近消息记录" tabindex="-1"><a class="header-anchor" href="#下载最近消息记录" aria-hidden="true">#</a> 下载最近消息记录</h2><p>App 管理员可以通过该接口获取 App 中最近 7 天中某天某小时的所有单发或群组消息记录的下载地址。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><ul><li>下载消息记录里的图片、语音、文件和短视频，此功能仅适用于 4.X 版本 IM SDK，可通过聊天记录中的 URL 字段进行下载。如您使用 2.X 或 3.X 版本的 IM SDK，您将无法通过该方法获取到以上信息，如您需要此功能，请您升级至 4.X 版本。</li><li>消息记录以日志文件形式保存并使用 GZip 压缩，通过该接口获取到下载地址后，请自行下载并处理；消息记录文件每小时产生一次，例如 0 点（00:00~00:59）的数据在 01:00 后开始处理，一般 1 小时内处理完毕（消息较多则处理时间较长）；文件有效期 7 天，无论是否下载过，都会在 7 天后删除，被删除后不支持重新导出；获取到的下载地址存在有效期，请在过期前进行下载，若地址失效，请通过该接口重新获取。</li><li>此接口仅用于下载最近 7 天的聊天记录文件，用于备份或数据统计等。不建议使用该接口用于线上实时业务。</li></ul></div><p>使用示例：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">GetHistoryRequest</span> request <span class="token operator">=</span> <span class="token class-name">GetHistoryRequest</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">chatType</span><span class="token punctuation">(</span><span class="token class-name">ChatType</span><span class="token punctuation">.</span>C2C<span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">msgTime</span><span class="token punctuation">(</span><span class="token string">&quot;2015120121&quot;</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token class-name">GetHistoryResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span>operation<span class="token punctuation">.</span><span class="token function">getHistory</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="获取服务器-ip-地址" tabindex="-1"><a class="header-anchor" href="#获取服务器-ip-地址" aria-hidden="true">#</a> 获取服务器 IP 地址</h2><p>基于安全等考虑，您可能需要获知服务器的 IP 地址列表，以便进行相关限制。App 管理员可以通过该接口获得 SDK、第三方回调所使用到的服务器 IP 地址列表或 IP 网段信息。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>此接口仅支持获取中国大陆地区的所有 IM 接入方式的 IP 地址或 IP 网段信息。</p></div><p>使用示例：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">GetIpListRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetIpListRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token class-name">GetIpListResult</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span>op<span class="token operator">~</span>eration<span class="token punctuation">.</span><span class="token function">getIpList</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>',15),t={},p=(0,a(3744).Z)(t,[["render",function(n,s){return e}]])},3744:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,e]of s)a[n]=e;return a}}}]);